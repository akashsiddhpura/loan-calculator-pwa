<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Loan & Saving Calculator</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#007bff">
  <style>
    body { font-family: Arial; padding: 20px; max-width: 600px; margin: auto; background: #f4f4f4; }
    input, button { padding: 8px; margin: 5px 0; width: 100%; }
    .result { background: #fff; padding: 15px; margin-top: 20px; border-radius: 8px; }
    h2 { color: #333; }
  </style>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js');
    }
  </script>
</head>
<body>

<h2>Loan & Saving Calculator</h2>

<label>Loan Amount (₹):</label>
<input type="number" id="loanAmount" placeholder="e.g. 3500000">

<label>Annual Interest Rate (%):</label>
<input type="number" id="interestRate" placeholder="e.g. 8">

<label>Loan Tenure (Years):</label>
<input type="number" id="loanTenure" placeholder="e.g. 20">

<label>Extra EMI Payment (once per year):</label>
<input type="number" id="extraPayment" placeholder="e.g. 100000">

<button onclick="calculateLoan()">Calculate</button>

<div class="result" id="result" style="display:none;"></div>

<script>
  function calculateLoan() {
    const P = parseFloat(document.getElementById("loanAmount").value);
    const R = parseFloat(document.getElementById("interestRate").value) / 12 / 100;
    const N = parseFloat(document.getElementById("loanTenure").value) * 12;
    const extra = parseFloat(document.getElementById("extraPayment").value);

    if (!P || !R || !N) {
      alert("Please fill all fields correctly.");
      return;
    }

    const EMI = P * R * Math.pow(1 + R, N) / (Math.pow(1 + R, N) - 1);
    let balance = P;
    let totalInterest = 0;
    let months = 0;

    while (balance > 0.1) {
      const interest = balance * R;
      const principal = EMI - interest;
      balance -= principal;
      totalInterest += interest;
      months++;
      if (months % 12 === 0 && extra > 0) {
        balance -= extra;
      }
      if (balance < 0) balance = 0;
    }

    const savings = (EMI * N) - totalInterest;
    const yearsSaved = (N - months) / 12;

    document.getElementById("result").innerHTML = `
      <h3>Results</h3>
      <p><strong>Monthly EMI:</strong> ₹${EMI.toFixed(2)}</p>
      <p><strong>Original Tenure:</strong> ${N / 12} years</p>
      <p><strong>Reduced Tenure:</strong> ${(months / 12).toFixed(2)} years</p>
      <p><strong>Interest Without Prepayment:</strong> ₹${(EMI * N - P).toFixed(2)}</p>
      <p><strong>Interest With Prepayment:</strong> ₹${totalInterest.toFixed(2)}</p>
      <p><strong>Total Interest Saved:</strong> ₹${((EMI * N - P) - totalInterest).toFixed(2)}</p>
      <p><strong>Tenure Reduced By:</strong> ${yearsSaved.toFixed(1)} years</p>
    `;
    document.getElementById("result").style.display = "block";
  }
</script>

</body>
</html>
